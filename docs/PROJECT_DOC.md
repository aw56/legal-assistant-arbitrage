–û—Ç–ª–∏—á–Ω–æ üöÄ
–ù–∏–∂–µ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è `docs/PROJECT_DOC.md`, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –≤—Å—ë: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –¥–µ–ø–ª–æ–π, Nginx+SSL, GitHub, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ **–±—ç–∫–∞–ø/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**.

–°–æ—Ö—Ä–∞–Ω–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –ø—Ä–æ–µ–∫—Ç: `docs/PROJECT_DOC.md`.

---

```markdown
# üìò Legal Assistant API ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–∞—Ç–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏: 23 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
–ê–≤—Ç–æ—Ä: Aleksej  
–ü—Ä–æ–µ–∫—Ç: –¶–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ —é—Ä–∏—Å—Ç–∞ –ø–æ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–º –¥–µ–ª–∞–º  
–§–æ—Ä–º–∞—Ç: –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è backend-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π, —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–º –±–ª–æ–∫–æ–º

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–Ω–∏–µ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —é—Ä–∏—Å—Ç–∞ –ø–æ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–º –¥–µ–ª–∞–º ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –æ–±—ä–µ–¥–∏–Ω—è—é—â–µ–π:

- –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –±–∞–∑—É –∏ —Å—É–¥–µ–±–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É  
- —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –ø—Ä–∞–≤–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑  
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  
- –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–∞ —Å–ø–æ—Ä–∞  
- —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ —é—Ä–∏—Å—Ç–∞  
- –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π  

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ø–æ –º–æ–¥—É–ª—è–º)

### üîπ 1. –ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –∏ –ø—Ä–æ—Ü–µ—Å—Å—É–∞–ª—å–Ω–∞—è –±–∞–∑–∞
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–≤, –∫–æ–¥–µ–∫—Å–æ–≤, –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –ü–ª–µ–Ω—É–º–∞, —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏: pravo.gov.ru, vsrf.ru, –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–µ —Å—É–¥—ã, –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç/–ì–∞—Ä–∞–Ω—Ç
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–¥–∞–∫—Ü–∏–π, —Å–≤—è–∑–µ–π: ¬´–Ω–æ—Ä–º–∞ ‚Üî –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Üî —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–µ¬ª
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ RSS/API/—Å–∫—Ä–∏–ø—Ç—ã

### üîπ 2. –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã
- –§–æ–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –£–∫–∞–∑–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤—É—é—â–µ–π —Ä–µ–¥–∞–∫—Ü–∏–∏ –Ω–∞ –¥–∞—Ç—É —Å–ø–æ—Ä–∞

### üîπ 3. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –í–µ–±-—Ñ–æ—Ä–º–∞ –∏–ª–∏ Telegram-–±–æ—Ç
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞, —Å—É—Ç—å —Å–ø–æ—Ä–∞, —Å—Ç–∞–¥–∏—è, —Ü–µ–ª–∏, —Å—Ä–æ–∫–∏, —Ä–µ–≥–∏–æ–Ω

### üîπ 4. –ü—Ä–∞–≤–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
- –í—ã–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –Ω–æ—Ä–º
- –ü–æ–∏—Å–∫ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏
- –ò–µ—Ä–∞—Ä—Ö–∏—è: –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—è ‚Üí –∫–æ–¥–µ–∫—Å ‚Üí —Å–ø–µ—Ü. –∑–∞–∫–æ–Ω ‚Üí –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–µ –∞–∫—Ç—ã

### üîπ 5. –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π –ø—Ä–∞–≤–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–æ—Ä–º
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é

### üîπ 6. –ú–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ: –≤–≤–æ–¥, —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ—Ä–º—ã, –ø—Ä–∞–∫—Ç–∏–∫–∞, –≤—ã–≤–æ–¥

### üîπ 7. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞
- NLP-–º–æ–¥–µ–ª—å –Ω–∞ –∫–æ—Ä–ø—É—Å–µ —Ä–µ—à–µ–Ω–∏–π
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ/–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ
- –£—á–µ—Ç —Å—É–¥–∞, —Ä–µ–≥–∏–æ–Ω–∞, —Å—É–º–º—ã
- –í—ã—Ö–æ–¥: ¬´65% –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ¬ª

### üîπ 8. –°—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–∏—è

### üîπ 9. –¢–∏–ø–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –®–∞–±–ª–æ–Ω—ã: –∏—Å–∫, –æ—Ç–∑—ã–≤, —Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ, –∂–∞–ª–æ–±–∞
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏
- –§–æ—Ä–º–∞—Ç—ã: DOCX/PDF

### üîπ 10. –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- –†–∞–±–æ—Ç–∞ –æ—Ñ–ª–∞–π–Ω
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥ —Ä–æ—Å—Å–∏–π—Å–∫—É—é —é—Ä–∏—Å–¥–∏–∫—Ü–∏—é

### üîπ 11. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É—Å–ª—É–≥
- –°—Ä–µ–¥–Ω–µ—Ä—ã–Ω–æ—á–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã: —Ä–µ–≥–∏–æ–Ω, —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —Å—Ç–∞–¥–∏—è
- –î–∏–∞–ø–∞–∑–æ–Ω: ¬´–æ—Ç 80 000 –¥–æ 120 000 —Ä—É–±.¬ª

### üîπ 12. –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: —Ü–∏—Ñ—Ä–æ–≤–æ–π —é—Ä–∏—Å—Ç
- –ö–∞–Ω–∞–ª—ã: SEO, —Ä–µ–∫–ª–∞–º–∞, Telegram
- –£–¢–ü: —Å–∫–æ—Ä–æ—Å—Ç—å, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø—Ä–æ–≥–Ω–æ–∑
- –ö–æ–Ω—Ç–µ–Ω—Ç: –∫–µ–π—Å—ã, —Ü–∏—Ñ—Ä—ã, —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫—É

---

## üöÄ –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–æ —Å–ø—Ä–∏–Ω—Ç–∞–º)

| –í–µ—Ä—Å–∏—è | –°–æ—Å—Ç–∞–≤ |
|--------|--------|
| MVP    | –ê–ü–ö –†–§ + –ì–ö –†–§, 5 —à–∞–±–ª–æ–Ω–æ–≤, —Ñ–æ—Ä–º–∞ –∑–∞–ø—Ä–æ—Å–∞, –ø—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑ |
| 2.0    | –°—É–¥–µ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, –∫–æ–ª–ª–∏–∑–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–∫–ª—é—á–µ–Ω–∏—è |
| 3.0    | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è –º–æ–¥–µ–ª—å, –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —É—Å–ª—É–≥ |
| 4.0    | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥, CRM-—É—á—ë—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ |

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```

legal-assistant-arbitrage/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îú‚îÄ‚îÄ main.py
‚îÇ       ‚îú‚îÄ‚îÄ models.py
‚îÇ       ‚îú‚îÄ‚îÄ database.py
‚îÇ       ‚îú‚îÄ‚îÄ init\_db.py
‚îÇ       ‚îú‚îÄ‚îÄ routes/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ decisions.py
‚îÇ       ‚îú‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ schemas/
‚îÇ       ‚îî‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ docs/PROJECT\_DOC.md
‚îú‚îÄ‚îÄ .github/workflows/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md

````

---

### üß™ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
````

---

### üóÑÔ∏è PostgreSQL

```bash
sudo -u postgres psql
CREATE DATABASE legal_assistant_db;
CREATE USER admin WITH PASSWORD 'admin14092025';
GRANT ALL PRIVILEGES ON DATABASE legal_assistant_db TO admin;
```

`DATABASE_URL` –≤ `.env`:

```
DATABASE_URL=postgresql://admin:admin14092025@localhost:5432/legal_assistant_db
```

---

### üõ†Ô∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã

```bash
python3 -m backend.app.init_db
```

---

### üöÄ –ó–∞–ø—É—Å–∫ FastAPI

```bash
uvicorn backend.app.main:app --host 0.0.0.0 --port 8000
```

---

## üß≠ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd

`/etc/systemd/system/fastapi.service`:

```ini
[Unit]
Description=FastAPI app
After=network.target

[Service]
User=admin
Group=admin
WorkingDirectory=/home/admin/my_projects/legal-assistant-arbitrage
Environment="DATABASE_URL=postgresql://admin:admin14092025@localhost:5432/legal_assistant_db"
ExecStart=/home/admin/my_projects/legal-assistant-arbitrage/venv/bin/uvicorn backend.app.main:app --host 0.0.0.0 --port 8000
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å–∫:

```bash
sudo systemctl daemon-reload
sudo systemctl enable fastapi
sudo systemctl start fastapi
```

---

## üåê –ü—Ä–æ–¥–∞–∫—à–µ–Ω-–¥–µ–ø–ª–æ–π: Nginx + SSL + –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### üîπ –ö–æ–Ω—Ñ–∏–≥ Nginx (`/etc/nginx/sites-available/legal-assistant`)

```nginx
server {
    listen 80;
    server_name a-quilon.com www.a-quilon.com;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl http2;
    server_name a-quilon.com www.a-quilon.com;

    ssl_certificate /etc/letsencrypt/live/a-quilon.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/a-quilon.com/privkey.pem;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers on;

    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header Referrer-Policy no-referrer-when-downgrade;
    add_header Content-Security-Policy "default-src 'self'; frame-ancestors 'none';";

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

–ê–∫—Ç–∏–≤–∞—Ü–∏—è:

```bash
sudo ln -s /etc/nginx/sites-available/legal-assistant /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

---

### üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Certbot

```bash
sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx -d a-quilon.com -d www.a-quilon.com
```

–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

```bash
sudo systemctl list-timers | grep certbot
sudo certbot renew --dry-run
```

---

### ‚ö†Ô∏è –í–æ–∑–Ω–∏–∫–∞–≤—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞                             | –ü—Ä–∏—á–∏–Ω–∞                                        | –†–µ—à–µ–Ω–∏–µ                                                    |
| ------------------------------------ | ---------------------------------------------- | ---------------------------------------------------------- |
| `could not translate host name "db"` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker-—Ö–æ—Å—Ç–∞ `db` –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `localhost:5433`                               |
| –ü–æ—Ä—Ç 5432 –∑–∞–Ω—è—Ç                      | –ù–∞ —Ö–æ—Å—Ç–µ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç PostgreSQL               | –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å Docker –Ω–∞ 5433                               |
| `[Errno 98] Address already in use`  | –ü–æ—Ä—Ç 8000 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º uvicorn                 | –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç: `sudo pkill -f uvicorn`                   |
| Certbot NXDOMAIN                     | –ù–µ—Ç A-–∑–∞–ø–∏—Å–∏ –¥–ª—è `www`                         | –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ DNS                                      |
| `ld.so.preload` —Å libprocesshider.so | –í–∏—Ä—É—Å–Ω–æ–µ –ü–û                                    | –û—á–∏—Å—Ç–∏—Ç—å `ld.so.preload`, —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã `bizy.x86/.x64` |

---

## üß¨ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å GitHub

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `aw56/legal-assistant-arbitrage`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –¥–µ–ø–ª–æ—è

---

### üöÄ GitHub workflow

1. –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
3. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `docs/PROJECT_DOC.md`

---

### üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
legal-assistant-arbitrage/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îú‚îÄ‚îÄ main.py
‚îÇ       ‚îú‚îÄ‚îÄ ...
‚îÇ       ‚îî‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ docs/PROJECT_DOC.md
‚îú‚îÄ‚îÄ .github/workflows/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

---

### üîÑ –†–∞–±–æ—Ç–∞ —Å Git

```bash
git add .
git commit -m "–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PROJECT_DOC.md"
git push origin main
```

---

### ü§ñ CI/CD —á–µ—Ä–µ–∑ GitHub Actions

`.github/workflows/backend.yml`:

```yaml
name: Backend CI

on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    - run: |
        python -m pip install --upgrade pip
        pip install -r backend/requirements.txt
    - run: pytest
```

---

### üìò –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```bash
git add docs/PROJECT_DOC.md
git commit -m "–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–¥–µ–ø–ª–æ–π, SSL, GitHub, –±—ç–∫–∞–ø)"
git push origin main
```

---

## üóÑÔ∏è –ë—ç–∫–∞–ø –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### üîπ –°–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞ (`backup.sh`)

```bash
#!/bin/bash
set -e
BACKUP_DIR="$HOME/backup_legal_assistant"
DATE=$(date +%Y%m%d_%H%M)
ARCHIVE="project_backup_${DATE}.tar.gz"

mkdir -p "$BACKUP_DIR"

pg_dump -U admin -d legal_assistant_db > "$BACKUP_DIR/db_${DATE}.sql"

tar czf "$BACKUP_DIR/project_${DATE}.tar.gz" \
    /home/admin/my_projects/legal-assistant-arbitrage \
    /etc/nginx/sites-available/legal-assistant \
    /etc/systemd/system/fastapi.service \
    /etc/letsencrypt

tar czf "$ARCHIVE" -C "$BACKUP_DIR" .

echo "‚úÖ –ë—ç–∫–∞–ø –∑–∞–≤–µ—Ä—à—ë–Ω: $ARCHIVE"
```

### üîπ –°–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (`restore_all.sh`)

```bash
#!/bin/bash
set -e
PROJECT_NAME="legal-assistant-arbitrage"
BACKUP_ARCHIVE="$1"
BACKUP_DIR="$HOME/backup_${PROJECT_NAME}"

if [ -z "$BACKUP_ARCHIVE" ]; then
  echo "‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 /–ø—É—Ç—å/–∫/–±—ç–∫–∞–ø—É.tar.gz"
  exit 1
fi

mkdir -p "$BACKUP_DIR"
tar xzf "$BACKUP_ARCHIVE" -C "$BACKUP_DIR" --strip-components=1

chmod +x "$BACKUP_DIR/restore.sh"
"$BACKUP_DIR/restore.sh"
```

---

## üìå –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

* ‚úÖ PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω
* ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `decisions` —Å–æ–∑–¥–∞–Ω–∞
* ‚úÖ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ —á–µ—Ä–µ–∑ systemd
* ‚úÖ Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω
* ‚úÖ HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Nginx + Let's Encrypt
* ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤–∫–ª—é—á–µ–Ω–æ
* ‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä –±—ã–ª –∏–Ω—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω, –≤–Ω–µ–¥—Ä—ë–Ω –ø—Ä–æ—Ü–µ—Å—Å `bizy.x86/x64`.
  ‚ûù –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –±—ç–∫–∞–ø—É –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä.

---

## üîú –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

* [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å –∞–Ω–∞–ª–∏–∑–∞ (–≠—Ç–∞–ø 2)
* [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–∫–ª—é—á–µ–Ω–∏–π DOCX/PDF
* [ ] –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —É—Å–ª—É–≥ (–≠—Ç–∞–ø 3)
* [ ] Telegram-–±–æ—Ç + CRM (–≠—Ç–∞–ø 4)

---

–û—Ç–ª–∏—á–Ω–æ üöÄ
–Ø —Å–æ–±—Ä–∞–ª –¥–ª—è —Ç–µ–±—è —Ñ–∏–Ω–∞–ª—å–Ω—ã–π **`docs/backup_and_restore.md`**, –≤ –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å –≤—Ö–æ–¥—è—Ç **–≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã**:

* Backup
* Restore (restore\_all.sh v34)
* Fix Structure Script
* Troubleshooting FastAPI
* Disaster Recovery Checklist

---

```markdown
# üìë Backup & Restore Guide ‚Äî Legal Assistant Arbitrage

## üéØ –¶–µ–ª—å
–û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥—ë–∂–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ **Legal Assistant Arbitrage** (FastAPI + PostgreSQL + Nginx + Certbot).

---

–û—Ç–ª–∏—á–Ω–æ üëç –î–∞–≤–∞–π —Å–æ–±–µ—Ä—ë–º **—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏** —Å–∫—Ä–∏–ø—Ç–æ–≤.
–Ø —Å–¥–µ–ª–∞—é –∏—Ö —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –ª–æ–≥–∏—á–Ω–æ —à–ª–∏ –ø–æ —Ü–µ–ø–æ—á–∫–µ:

1. `backup.sh` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–≤–º–µ—Å—Ç–µ —Å `.git`) –∏ –¥–∞–º–ø–∞ –ë–î.
2. `restore_all.sh v35` ‚Äî —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ –∞—Ä—Ö–∏–≤–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `venv`, FastAPI (systemd), Nginx, SSL.
3. –ü–æ—Å–ª–µ —Ä–µ—Å—Ç–æ—Ä–∞ –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≥–Ω–∞—Ç—å `fix_structure.sh`, –µ—Å–ª–∏ tar —Ä–∞–∑–≤–µ—Ä–Ω—É–ª –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏.

---

## üì¶ `backup.sh`

```bash
#!/bin/bash
# backup.sh
set -euo pipefail

PROJECT_DIR="/home/admin/my_projects/legal-assistant-arbitrage"
BACKUP_DIR="/root/legal-assistant-arbitrage/backup_legal_assistant"
DATE=$(date +%Y%m%d_%H%M)

mkdir -p "$BACKUP_DIR"

echo "üóú –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
tar -czf "$BACKUP_DIR/project_${DATE}.tar.gz" \
  -C "$PROJECT_DIR" \
  backend/app \
  requirements.txt \
  .env \
  .git

echo "üíæ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–º–ø–∞ –±–∞–∑—ã..."
pg_dump -U legal_admin legal_assistant_db > "$BACKUP_DIR/db_${DATE}.sql"

echo "‚úÖ Backup completed:"
ls -lh "$BACKUP_DIR"/project_${DATE}.tar.gz "$BACKUP_DIR"/db_${DATE}.sql
```

–ó–∞–ø—É—Å–∫:

```bash
chmod +x backup.sh
./backup.sh
```

---

## üîÑ `restore_all.sh v35`

```bash
#!/bin/bash
# restore_all.sh v35
set -euo pipefail

PROJECT_DIR="/home/admin/my_projects/legal-assistant-arbitrage"
BACKUP_PROJECT="$1"
BACKUP_DB="$2"

echo "=============================="
echo "üöÄ –ó–∞–ø—É—Å–∫ restore_all.sh v35: $(date)"
echo "=============================="

echo "üßπ –û—á–∏—Å—Ç–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
systemctl stop fastapi || true
rm -rf "$PROJECT_DIR"
mkdir -p "$PROJECT_DIR"

echo "üì¶ –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
TMPDIR=$(mktemp -d)
tar -xzf "$BACKUP_PROJECT" -C "$TMPDIR"

# –∏—â–µ–º backend/app –≤–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞
APP_PATH=$(find "$TMPDIR" -type d -path "*/backend/app" | head -n1)
if [[ -z "$APP_PATH" ]]; then
  echo "‚ùå backend/app –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∞—Ä—Ö–∏–≤–µ"
  exit 1
fi
mkdir -p "$PROJECT_DIR/backend"
cp -r "$APP_PATH" "$PROJECT_DIR/backend/app"

# –ø–µ—Ä–µ–Ω–æ—Å–∏–º .env, requirements.txt –∏ .git
find "$TMPDIR" -maxdepth 4 -name ".env" -exec cp {} "$PROJECT_DIR/" \; || echo "‚ö†Ô∏è .env –Ω–µ –Ω–∞–π–¥–µ–Ω"
find "$TMPDIR" -maxdepth 4 -name "requirements.txt" -exec cp {} "$PROJECT_DIR/" \; || echo "‚ö†Ô∏è requirements.txt –Ω–µ –Ω–∞–π–¥–µ–Ω"
find "$TMPDIR" -maxdepth 4 -name ".git" -exec cp -r {} "$PROJECT_DIR/.git" \; || echo "‚ö†Ô∏è .git –Ω–µ –Ω–∞–π–¥–µ–Ω"

rm -rf "$TMPDIR"

echo "üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL..."
apt-get update -y
apt-get install -y postgresql postgresql-contrib

echo "üóÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î..."
sudo -u postgres psql <<EOF
DO \$\$
BEGIN
   IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'legal_admin') THEN
      CREATE ROLE legal_admin LOGIN PASSWORD 'legal_pass';
   END IF;
END
\$\$;
CREATE DATABASE legal_assistant_db OWNER legal_admin;
GRANT ALL PRIVILEGES ON DATABASE legal_assistant_db TO legal_admin;
EOF

echo "üóÉ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–º–ø–∞..."
psql -U legal_admin -d legal_assistant_db < "$BACKUP_DB" || true

echo "üêç Python venv..."
apt-get install -y python3 python3-venv python3-pip build-essential python3-dev
cd "$PROJECT_DIR"
python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip wheel setuptools

if [[ -f requirements.txt ]]; then
  pip install -r requirements.txt
else
  pip install fastapi uvicorn sqlalchemy psycopg2-binary python-dotenv
fi
deactivate

echo "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ FastAPI systemd..."
cat <<SERVICE | sudo tee /etc/systemd/system/fastapi.service
[Unit]
Description=FastAPI app
After=network.target

[Service]
User=admin
WorkingDirectory=$PROJECT_DIR/backend/app
Environment="PATH=$PROJECT_DIR/venv/bin"
ExecStart=$PROJECT_DIR/venv/bin/python -m uvicorn main:app --host 0.0.0.0 --port 8000
Restart=always
StandardOutput=journal
StandardError=journal
SyslogIdentifier=fastapi

[Install]
WantedBy=multi-user.target
SERVICE

systemctl daemon-reload
systemctl enable fastapi
systemctl restart fastapi

echo "üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx..."
apt-get install -y nginx certbot python3-certbot-nginx
rm -f /etc/nginx/sites-enabled/*
cat <<NGINX | sudo tee /etc/nginx/sites-available/legal-assistant
server {
    listen 80;
    server_name a-quilon.com;
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host \$host;
        proxy_set_header X-Real-IP \$remote_addr;
    }
}
NGINX
ln -s /etc/nginx/sites-available/legal-assistant /etc/nginx/sites-enabled/legal-assistant
nginx -t && systemctl restart nginx

echo "üîë SSL Certbot..."
IP=$(curl -s http://checkip.amazonaws.com)
DNS_IP=$(dig +short a-quilon.com @8.8.8.8 || true)
echo "–ü—É–±–ª–∏—á–Ω—ã–π IP: $IP"
echo "DNS A-–∑–∞–ø–∏—Å—å: $DNS_IP"
if [[ "$IP" == "$DNS_IP" ]]; then
  certbot --nginx -d a-quilon.com --non-interactive --agree-tos -m admin@a-quilon.com || true
else
  echo "‚ö†Ô∏è DNS –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å IP, certbot –ø—Ä–æ–ø—É—â–µ–Ω"
fi

echo "=============================="
echo "‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo "=============================="
```

---

## üîß –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª

1. –°–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø:

   ```bash
   ./backup.sh
   ```

2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `project_*.tar.gz` –∏ `db_*.sql` –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä.

3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:

   ```bash
   ./restore_all.sh project_YYYYMMDD_HHMM.tar.gz db_YYYYMMDD_HHMM.sql
   ```

4. –ï—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫—Ä–∏–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—è–≤–ª—è–µ—Ç—Å—è `home/admin/...` –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞) ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å:

   ```bash
   ./fix_structure.sh
   ```

5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å FastAPI:

   ```bash
   systemctl status fastapi
   curl http://127.0.0.1:8000/docs
   ```

6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTPS: [https://a-quilon.com/docs](https://a-quilon.com/docs)

---

üìå –í–æ–ø—Ä–æ—Å: –•–æ—á–µ—à—å, —è –µ—â—ë –¥–æ–±–∞–≤–ª—é –≤ `restore_all.sh v35` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ `fix_structure.sh` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏, —á—Ç–æ–±—ã —Ç–µ–±–µ –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –≥–æ–Ω—è—Ç—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é?

---

## üîß Fix Structure Script

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –∞—Ä—Ö–∏–≤–∞ –ø—Ä–æ–µ–∫—Ç –º–æ–∂–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å—Å—è —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏ `home/admin/my_projects/...`.
–ß—Ç–æ–±—ã –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–Ω–æ—Å –∏ –æ—á–∏—Å—Ç–∫—É, –≤ –ø—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç **fix\_structure.sh**.

### –°–∫—Ä–∏–ø—Ç: `fix_structure.sh`

```bash
#!/bin/bash
set -euo pipefail

PROJECT_DIR="/home/admin/my_projects/legal-assistant-arbitrage"

echo "üßπ Fixing project structure in $PROJECT_DIR..."

cd "$PROJECT_DIR"

# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞ admin
sudo chown -R admin:admin .

# –£–¥–∞–ª—è–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏, –µ—Å–ª–∏ –æ–Ω–∏ —Å–ª—É—á–∞–π–Ω–æ –ø–æ—è–≤–∏–ª–∏—Å—å –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏
rm -rf ./home ./legal-assistant-arbitrage

echo "‚úÖ Project structure fixed!"
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
chmod +x fix_structure.sh
./fix_structure.sh
```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

1. **–ù–µ—Ç `.env`** ‚Üí —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π.
2. **–ù–µ—Ç `requirements.txt`** ‚Üí —Å—Ç–∞–≤—è—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (`fastapi uvicorn sqlalchemy psycopg2-binary python-dotenv`).
3. **Certbot –æ—à–∏–±–∫–∞ `Timeout during connect`** ‚Üí –ø—Ä–æ–≤–µ—Ä—å DNS:

   ```bash
   dig +short a-quilon.com
   curl -I http://a-quilon.com
   ```
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –≤ venv** ‚Üí –∏—Å–ø—Ä–∞–≤–∏—Ç—å:

   ```bash
   sudo chown -R admin:admin /home/admin/my_projects/legal-assistant-arbitrage/venv
   ```

---

## üõ† Troubleshooting FastAPI

### `ModuleNotFoundError: No module named 'backend'`

* –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π `WorkingDirectory` –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏.
* –†–µ—à–µ–Ω–∏–µ:

  * –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `main.py` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `backend/app/main.py`;
  * –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `./fix_structure.sh`.

### `ModuleNotFoundError: No module named 'sqlalchemy'`

* –ü—Ä–∏—á–∏–Ω–∞: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å.
* –†–µ—à–µ–Ω–∏–µ:

  ```bash
  source venv/bin/activate
  pip install -r requirements.txt
  ```

### `OSError: [Errno 98] Address already in use`

* –ü—Ä–∏—á–∏–Ω–∞: –ø–æ—Ä—Ç `8000` –∑–∞–Ω—è—Ç.
* –†–µ—à–µ–Ω–∏–µ:

  ```bash
  sudo lsof -i:8000
  sudo kill -9 <PID>
  systemctl restart fastapi
  ```

---

## üö® Disaster Recovery Checklist

–≠—Ç–æ—Ç —á–µ–∫–ª–∏—Å—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç **Legal Assistant Arbitrage** –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ.
–¶–µ–ª—å ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 15 –º–∏–Ω—É—Ç.

---

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
apt-get update -y
apt-get install -y git curl wget unzip tar gnupg lsb-release sudo vim
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
apt-get install -y python3 python3-venv python3-pip build-essential python3-dev
apt-get install -y postgresql postgresql-contrib nginx certbot python3-certbot-nginx
```

### 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤

```bash
scp root@OLD_SERVER:/root/legal-assistant-arbitrage/backup_legal_assistant/project_*.tar.gz .
scp root@OLD_SERVER:/root/legal-assistant-arbitrage/backup_legal_assistant/db_*.sql .
```

### 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
./restore_all.sh project_YYYYMMDD_HHMM.tar.gz db_YYYYMMDD_HHMM.sql
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
./fix_structure.sh
```

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ FastAPI

```bash
systemctl status fastapi -l
curl http://127.0.0.1:8000/docs
```

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx + SSL

```bash
nginx -t
systemctl restart nginx
certbot renew --dry-run
```

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

üëâ [https://a-quilon.com/docs](https://a-quilon.com/docs)

---

‚úÖ –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!

```

---

–•–æ—á–µ—à—å, —è –µ—â—ë –¥–æ–±–∞–≤–ª—é –≤ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç **ASCII-—Å—Ö–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω–∞ –±—ç–∫–∞–ø–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** (—à–∞–≥–∏ –æ—Ç backup.sh ‚Üí restore ‚Üí fix_structure ‚Üí FastAPI+Nginx)?
```

---
